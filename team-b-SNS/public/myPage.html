<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>マイページ</title>

  <script src="https://www.gstatic.com/firebasejs/5.5.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/5.5.2/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/5.5.2/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/5.5.2/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/5.5.2/firebase-messaging.js"></script>
  <script src="https://www.gstatic.com/firebasejs/5.5.2/firebase-functions.js"></script>

  <script src="js/apiConfig.js"></script>
  <script type="text/javascript" src="js/loginUser.js"></script>

  <!-- <script>

    function loginUser() {

      //location.replace('index.html')
      //});


      //認証状態の確認(ログインしているユーザーを取得する)
      firebase.auth().onAuthStateChanged(function(user) {
        if (user) {
          //ユーザーがログインしている状態
          //loginDisplay();
          //setTimeout(function(){
          //window.location.href = 'timeline.html';
          //}, 3*1000);
        } else {
          //ユーザーがログインしていない状態
          logoutDisplay();
        }
      });

      //function loginDisplay() {
      //logout.classList.remove('d-none');
      //info.textContent = "あなたはログイン中です";
      //}

      function logoutDisplay() {
        //logout.classList.add('d-none');
        location.replace('404.html')
  }
  // return();
  }
  </script> -->

  <!-- ページを開いた時に、ユーザー登録情報の読み込みを行う -->
  <script>
    window.onload = function read() {

      console.log('Firebaseからデータ取得しました');
      firebase.auth().onAuthStateChanged(function(user) {
        if (user) {
          console.log(user.uid);
          var userInfo = firebase
            .database()
            .ref("/users/" + user.uid)
            .once("value")
            .then(function(snapshot) {
              var firstName =
                (snapshot.val() && snapshot.val().firstName) || "Anonymous";
              var secondName =
                (snapshot.val() && snapshot.val().secondName) || "Anonymous";
              var username =
                (snapshot.val() && snapshot.val().username) || "Anonymous";

              var comment =
                (snapshot.val() && snapshot.val().comment) || "Anonymous";
              var photoURL =
                (snapshot.val() && snapshot.val().photoURL) || "Anonymous";

              var email = user.email;
              // ...
              document.getElementById("inputUserName").value = username;
              document.getElementById("inputFirstName").value = firstName;
              document.getElementById("inputSecondName").value = secondName;
              document.getElementById("exampleTextarea").value = comment;
              document.getElementById("inputEmail").value = email;
            });
        };
      });
    };
  </script>




 <link href="css/logo.css" rel="stylesheet" />

  <!-- BootstrapのCSS読み込み -->
  <link href="css/bootstrap.css" rel="stylesheet">
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <!-- style.cssの読み込み -->
  <!-- <link href="css/style.css" rel="stylesheet"> -->


  <!-- jQuery読み込み -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  <!-- BootstrapのJS読み込み -->
  <script src="js/bootstrap.min.js"></script>



  <!-- initialize the SDK after all desired features are loaded -->
  <!-- <script defer src="https://www.gstatic.com/firebasejs/init.js"></script> -->


  <style media="screen">
    body { background: white; color: rgba(0,0,0,0.87); font-family: Roboto, Helvetica, Arial, sans-serif; margin: 0; padding: 0; }
      #message { background: white; max-width: 360px; margin: 100px auto 16px; padding: 32px 24px; border-radius: 3px; }
      #message h2 { color: #ffa100; font-weight: bold; font-size: 16px; margin: 0 0 8px; }
      #message h1 { font-size: 22px; font-weight: 300; color: rgba(0,0,0,0.6); margin: 0 0 16px;}
      #message p { line-height: 140%; margin: 16px 0 24px; font-size: 14px; }
      #message a { display: block; text-align: center; background: #039be5; text-transform: uppercase; text-decoration: none; color: white; padding: 16px; border-radius: 4px; }
      #message, #message a { box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24); }
      #load { color: rgba(0,0,0,0.4); text-align: center; font-size: 13px; }
      @media (max-width: 600px) {
        body, #message { margin-top: 0; background: white; box-shadow: none; }
        /* body { border-top: 16px solid #ffa100; } */
      }
    </style>
</head>

<body id="body00" class="d-none" >
  <header class="sticky-top mb-2 bg-white">
    <!-- 親（ここではheaderタブ）にかかるデフォルトの左右の余白をこのdivに当ててその下のrowにかからないようにするために入れている。 -->
    <div class="col-12">　
      <div class="row align-items-end">
        <div id="logo-space" class="col-6  text-left">
          <img class="pc" src="img/logo_2.svg" alt="パソコン用の画像">
          <img class="sp" src="img/logo.svg" alt="スマートフォン用の画像">
        </div>

        <div id="title-space" class="col-6 text-right ">
          <span class="">マイページ</span>
        </div>
      </div>
    </div>
    <hr class="mw-100  bg-light my-4">
  </header>



  <div class="container-fluid" style="margin-bottom:100px;">

    <div class="text-center m-5">
          <img id="logo" src="img/prof_icon.svg" style="width: 120px;" />
    </div>



    <div class="container-fluid" style="margin-bottom:100px;">
        <div class="panel panel-default">
          <div class="panel-body">
            <form class="form-horizontal">
              <div class="form-group has-error">
                <label class="control-label">名前</label>
                <div class="text-center d-flex align-items-center mw-100 mb-3">
                  <input
                    type="text"
                    id="inputFirstName"
                    class="form-control col-6 mr-2"
                    placeholder="姓"
                    required=""
                    readonly=""
                  />
                  <input
                    type="text"
                    id="inputSecondName"
                    class="form-control col-6"
                    placeholder="名"
                    required=""
                    readonly=""
                  />
                </div>
              </div>

              <div class="form-group has-error">
                <label class="control-label">ユーザーネーム</label>
                <div class="text-center d-flex align-items-center mw-100 mb-3">
                  <input
                    type="text"
                    id="inputUserName"
                    class="form-control col-12"
                    placeholder="User name"
                    required=""
                    readonly=""
                  />
                </div>
              </div>

              <div class="form-group has-error">
                <label class="control-label">E-mail</label>
                <div class="text-center d-flex align-items-center mw-100 mb-3">
                  <input
                    type="text"
                    id="inputEmail"
                    class="form-control col-12"
                    placeholder="E-mail"
                    required=""
                    readonly=""
                  />
                </div>
              </div>

              <div class="form-group has-error">
                  <label class="control-label">自己紹介</label>
                <input
                  id="exampleTextarea"
                  class="form-control col-12"
                  placeholder="free"
                  readonly=""
                />
              </div>

      <div class="newSignUp text-center mt-5">
        <p class="mb-2"> 登録情報変更は、
          <a href="userInfoUpdate.html">
            こちら
          </a>
            から</p>
      </div>


      <div class="text-center m-5">
        <li style="list-style: none;">
          <button id="logout" type="button" class="btn btn-info">ログアウト</button>
        </li>
      </div>



    <div class="mw-100 shadow-sm p-2 mx-2 my-3" id="postBox">
      <div class="row">

        <div class="col-md">
          <!-- 画像のbox ブレイクポイントはMedium（768px〜991px） -->
          <div class="mx-100">
            <div class="">
              <!-- 画像 --> <img class="mw-100" id="boxPic" src="img/img_sample1.jpg" />
            </div>
          </div> <!-- 画像のbox ブレイクポイントはMedium（768px〜991px） 終わり-->
        </div>
        <!-- いいね！・投稿日時・編集のbox -->
        <div class="col-md mt-2">

          <!-- いいね！・投稿日時・編集のcontainer 終わり-->
          <div class=" container-fluid">

            <div class="row">
              <!-- ハート のbox -->
              <div class="col-1 p-0 text-right">
                <!-- ハート --> <img id="heartPic" class="h-50" src="img/likes_heart.svg" alt="" style="width: 35px;height: 35px;" />
              </div> <!-- ハート のbox 終わり-->
              <div id="likesNumber" class="col-2 p-0">
                <!-- いいねの数 のbox -->
                <!-- いいね！の数 -->
                <div class="mw-100 text-left" style="font-size:24px">110</div>
              </div> <!-- いいねの数 のbox 終わり-->
              <!-- 投稿日 のbox -->
              <div class="col-7 text-right">
                <small><span id="postDate" class="">2018年12月25日</span></small>
              </div> <!-- 投稿日 のbox 終わり-->
              <!-- 編集ボタン のbox -->
              <div class="col-2 p-0 text-right">
                <!-- 編集ボタン --> <img id="editBtn" class="h-75" src="img/edit_icon.svg" alt="" style="width: 35px;height: 35px;" />
              </div> <!-- 編集ボタン のbox 終わり-->

            </div>
          </div><!-- いいね！・投稿日時・編集のcontainer 終わり-->
        </div><!-- いいね！・投稿日時・編集のbox 終わり-->
      </div>
    </div><!-- 投稿アーカイブのbox 終わり-->




    </div>


    </div>

  </div>


  <footer class="fixed-bottom bg-white pb-2">
    <hr class="mw-100 bg-light">
    <div class="col-12">
      <div class="row">
        <!-- ホームアイコン -->
        <div id="timeLine" class="col-4 text-center">
          <a href="timeLine.html">
            <img id="timeLineIcon" src="img/home_icon.svg" style="width: 40px;" />
          </a>
        </div>
        <!-- 新規投稿アイコン -->
        <div id="newPost" class="col-4 text-center">
          <a href="newPostPic.html">
            <img id="newPostIcon" src="img/newPost_icon.svg" style="width: 40px;" />
          </a>
        </div>
        <!-- マイページアイコン -->
        <div id="myPage" class="col-4 text-center">
          <a href="myPage.html">
            <img id="myPageIcon" src="img/myPage_icon.svg" style="width: 40px;" />
          </a>
        </div>
      </div>
    </div>
  </footer>

  <!-- <script src="https://www.gstatic.com/firebasejs/5.7.3/firebase.js"></script> -->


<!-- <script>

  function loginUser() {

    //location.replace('index.html')
    //});


    //認証状態の確認(ログインしているユーザーを取得する)
    firebase.auth().onAuthStateChanged(function(user) {
      if (user) {
        //ユーザーがログインしている状態
        //loginDisplay();
        //setTimeout(function(){
        //window.location.href = 'timeline.html';
        //}, 3*1000);
      } else {
        //ユーザーがログインしていない状態
        logoutDisplay();
      }
    });

    //function loginDisplay() {
    //logout.classList.remove('d-none');
    //info.textContent = "あなたはログイン中です";
    //}

    function logoutDisplay() {
      //logout.classList.add('d-none');
      location.replace('index.html')
}
// return();
}

window.onload = function () { // ページ読み込み時に実行する無名関数
    read(); // １つ目の関数呼び出し
    loginUser(); // ２つ目の関数呼び出し
}
</script> -->


<!-- <script src="js/user.js"></script> -->


  <!-- エラーが出ていたのでとりあえずコメントアウト -->
  <script src="/js/logout_v2.js"></script>














</body>

</html>
